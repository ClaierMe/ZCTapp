var outsetPoint=document.getElementById("outset"),destinationPoint=document.getElementById("destination"),btn=document.getElementsByClassName("inquiry")[0];function chooseDes(t){destinationPoint.value=t.innerText,destinationPoint.name=t.id,submitData()}function chooseOri(t){outsetPoint.value=t.innerText,outsetPoint.name=t.id}function getDestination(t){var n,e;$("#specficDes").empty(),""==destinationPoint.value&&"终点位置："==destinationPoint.value||(btn.style.backgroundColor="#0079c5"),""!=destinationPoint.value&&"终点位置："!=destinationPoint.value||(btn.style.backgroundColor="#92CDF2"),"outset"===t.id?(n=t.value,e="22.523775,113.3684"):"destination"===t.id&&(n="22.523775,113.3684",e=t.value),queryTransfer(n,e,function(n){if(2!=n.type&&1==n.type){if(1==n.destination.length&&1==n.origin.length||"string"==typeof n.destination&&"22.523775,113.3684"==n.origin||"string"==typeof n.origin&&"22.523775,113.3684"==n.destination)return;var e,i,o;n.destination.length>=1&&"string"!=typeof n.destination?e=n.destination:n.origin.length>=1&&"string"!=typeof n.origin&&(e=n.origin);var a=document.createElement("p"),s=document.createTextNode("猜您想去:");a.appendChild(s),a.className="prompt",document.getElementById("specficDes").appendChild(a);for(var r=0;r<e.length;r++){i=e[r].split("_")[0],o=e[r].split("_")[2];var u=document.createElement("div"),c=document.createTextNode(i);u.appendChild(c),document.getElementById("specficDes").appendChild(u),u.className="desClass",u.setAttribute("id",o),u.setAttribute("name",i),"destination"==t.id?u.setAttribute("onclick","chooseDes(this)"):u.setAttribute("onclick","chooseOri(this)")}}})}function submitData(){var t;""!=(t=""!=destinationPoint.name?destinationPoint.name:destinationPoint.value)&&"终点位置："!=t?""!==outsetPoint.value&&"起始位置：我的位置"!==outsetPoint.value?queryTransfer(""==outsetPoint.name?outsetPoint.value:outsetPoint.name,t,function(t){if(2===t.type)if(""!=t.plan){var n=t.plan;sessionStorage.plan=JSON.stringify(n),window.location.href="../views/busTransferPlan.html"}else $.confirm({title:"没找到相关路线",text:"",onOK:function(){},onCancel:function(){}});else $.confirm({title:"没找到相关路线",text:"可能是因为您输入的起始地或者目的地过于模糊哦",onOK:function(){},onCancel:function(){}})}):zct.getLocation(function(n){outsetPoint.name=n.latitude+","+n.longitude,queryTransfer(outsetPoint.name,t,function(t){if(2===t.type)if(""!=t.type){var n=t.plan;sessionStorage.plan=JSON.stringify(n),window.location.href="../views/busTransferPlan.html"}else $.confirm({title:"没找到相关路线",text:"",onOK:function(){},onCancel:function(){}});else $.confirm({title:"没找到相关路线",text:"可能是因为您输入的起始地或者目的地过于模糊哦",onOK:function(){},onCancel:function(){}})})}):$.confirm({title:"温馨提示",text:"请您输入终点位置",onOK:function(){window.location.href="/views/busTransfer.html"},onCancel:function(){window.location.href="/views/busTransfer.html"}})}function queryTransfer(t,n,e){var i={p0:"",p1:""};i.p0=t,i.p1=n;var o=createURL(i);console.log(i.p0),$.ajax({url:CONFIG.getLineInfoAndCardInfo+"realtimebus/query/queryService/getTransit"+o,type:"GET",processData:!1,contentType:!1,dataType:"json",async:!0,success:function(t){e(t)},error:function(t){}})}$(function(){""!==destinationPoint.value&&"终点位置："!==destinationPoint.value||(btn.style.backgroundColor="#92CDF2")});